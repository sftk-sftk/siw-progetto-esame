<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head th:replace="fragments/head :: common-head('Uma Coffe Prodotto')"></head>

<body class="bg-coffe">
	<!-- Navbar Section -->
	<div th:replace="fragments/navbar :: navbar"></div>


	<main class="index prodottoPage">

		<div th:replace="fragments/prodottoDettagli :: dettagli-prodotto"></div>

		<section class="commenti">
			<p>Commenti</p>
			<div th:if="${commentoUser.id == null}">
				<form class="commento" th:action="@{/user/newCommento/{id}(id=${prodotto.id})}"
					th:object="${commentoUser}" method="post">

					<div>
						<label for="descrizione">Descrizione</label><br>
						<textarea type="text" th:field="*{descrizione}" id="descrizione" required></textarea>
					</div>

					<button class="coffe-button" type="submit">Salva</button>
				</form>
			</div>
			<div th:if="${commentoUser.id != null}">
				<div>
					<div class="nomeUser">
						<span th:text="${commentoUser.user.nome}" class="nomePrezzo fw-semibold">
							Nome
						</span>
						<span th:text="${commentoUser.user.cognome.substring(0,1) + '.'}"
							class="nomePrezzo fw-semibold">
							Cognome
						</span>
						<span th:text="${commentoUser.data}" class="data ms-3">
							Data
						</span>
					</div>
					<div class="commento">
						<p th:text="${commentoUser.descrizione}" class="mb-4">
							Descrizione
						</p>
						<button class="coffe-button"><a
								th:href="@{/user/editCommento/{id}(id=${prodotto.id})}">Modifica</a></button>
						<button class="coffe-button"><a
								th:href="@{/user/deleteCommento/{id}(id=${prodotto.id})}">Cancella</a></button>
					</div>
				</div>
			</div>

			<div th:each="commento : ${commenti}">
				<div>
					<div class="nomeUser">
						<span th:text="${commento.user.nome}" class="nomePrezzo fw-semibold">
							Nome
						</span>
						<span th:text="${commento.user.cognome.substring(0,1) + '.'}" class="nomePrezzo fw-semibold">
							Cognome
						</span>
						<span th:text="${commento.data}" class="data ms-3">
							Data
						</span>
					</div>
					<div class="commento">
						<p th:text="${commento.descrizione}">
							Descrizione
						</p>
					</div>

				</div>
			</div>

		</section>

	</main>

	<div th:replace="fragments/footerScripts :: footerScripts"></div>

</body>

</html>